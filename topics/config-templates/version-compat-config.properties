# 消息版本兼容配置模板

# Schema Registry配置
schema.registry.enabled=true
schema.registry.url=http://localhost:8081
schema.registry.compatibility.level=backward  # backward/forward/full/none
schema.registry.compatibility.check.enabled=true

# 版本管理配置
version.management.enabled=true
version.format=semantic  # semantic/numeric/custom
version.header.name=message-version
version.header.required=true

# 兼容性策略配置
compatibility.strategy=backward  # backward/forward/full/none
compatibility.forward.enabled=true
compatibility.forward.new.fields.optional=true
compatibility.forward.field.deletion.allowed=false
compatibility.backward.enabled=true
compatibility.backward.old.version.support=true
compatibility.backward.downgrade.enabled=true

# 版本路由配置
version.routing.enabled=true
version.routing.strategy=header  # header/content/schema
version.routing.header.name=message-version
version.routing.default.version=1.0

# 迁移策略配置
migration.strategy=gradual  # gradual/coexistence/fast
migration.gradual.enabled=true
migration.gradual.dual.write.enabled=true
migration.gradual.switch.percentage=10  # 10%逐步切换
migration.coexistence.enabled=false
migration.coexistence.max.versions=3
migration.fast.enabled=false
migration.fast.downtime.allowed=false

# 版本验证配置
version.validation.enabled=true
version.validation.schema.check=true
version.validation.format.check=true
version.validation.compatibility.check=true

# 版本监控配置
version.monitor.enabled=true
version.monitor.metrics=version_count,version_distribution,compatibility_errors
version.monitor.alert.enabled=true
version.monitor.alert.compatibility.error.threshold=0.01  # 1%兼容性错误

# 降级策略配置
downgrade.strategy.enabled=true
downgrade.strategy.type=automatic  # automatic/manual
downgrade.strategy.trigger=compatibility_error  # compatibility_error/performance_issue
downgrade.strategy.rollback.enabled=true
