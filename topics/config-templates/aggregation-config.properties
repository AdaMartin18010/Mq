# 消息聚合配置模板

# Kafka聚合配置
kafka.producer.batch.size=16384  # 批次大小（字节）
kafka.producer.linger.ms=10  # 等待时间（毫秒）
kafka.producer.buffer.memory=33554432  # 缓冲区大小（字节）
kafka.consumer.max.poll.records=500  # 每次poll最大记录数
kafka.consumer.max.poll.interval.ms=300000  # poll间隔（毫秒）

# NATS聚合配置
nats.publish.batch.size=100  # 批量发布大小
nats.publish.flush.interval=10  # Flush间隔（毫秒）
nats.subscribe.batch.size=100  # 批量订阅大小
nats.subscribe.batch.timeout=100  # 批量超时（毫秒）

# RabbitMQ聚合配置
rabbitmq.publish.batch.size=100  # 批量发布大小
rabbitmq.publish.batch.timeout=10  # 批量超时（毫秒）
rabbitmq.consume.batch.size=100  # 批量消费大小
rabbitmq.consume.batch.timeout=100  # 批量超时（毫秒）

# 聚合策略配置
aggregation.strategy=time-window  # time-window/count-threshold/size-threshold/mixed
aggregation.time.window.ms=1000  # 时间窗口（毫秒）
aggregation.count.threshold=100  # 数量阈值
aggregation.size.threshold=16384  # 大小阈值（字节）

# 拆分策略配置
split.strategy=fixed-size  # fixed-size/dynamic-size/batch
split.fixed.size=16384  # 固定拆分大小（字节）
split.dynamic.enabled=false
split.batch.size=100  # 批量拆分大小

# 重组配置
reassembly.enabled=true
reassembly.timeout.ms=60000  # 重组超时（毫秒）
reassembly.max.parts=1000  # 最大拆分部分数
reassembly.storage=memory  # memory/redis/database

# 聚合监控配置
aggregation.monitor.enabled=true
aggregation.monitor.metrics=aggregation_count,aggregation_size,aggregation_latency,aggregation_throughput
aggregation.monitor.alert.enabled=true
aggregation.monitor.alert.latency.threshold=1000  # 聚合延迟阈值（毫秒）

# 性能优化配置
aggregation.optimization.enabled=true
aggregation.optimization.compression.enabled=true
aggregation.optimization.compression.type=snappy
aggregation.optimization.memory.pool.enabled=true
aggregation.optimization.memory.pool.size=100
