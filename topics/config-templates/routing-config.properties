# 消息路由配置模板

# Kafka路由配置
kafka.routing.strategy=key-hash  # key-hash/custom/partition
kafka.routing.key.field=id  # 使用消息中的字段作为路由键
kafka.routing.custom.partitioner=com.example.CustomPartitioner
kafka.routing.partition.count=6

# NATS路由配置
nats.routing.strategy=subject  # subject/queue/custom
nats.routing.subject.pattern=orders.{region}.{priority}
nats.routing.queue.group.enabled=true
nats.routing.queue.group.name=workers

# RabbitMQ路由配置
rabbitmq.routing.strategy=topic  # direct/topic/headers/fanout
rabbitmq.routing.exchange.type=topic
rabbitmq.routing.exchange.name=orders
rabbitmq.routing.key.pattern=order.{action}.{priority}
rabbitmq.routing.headers.match=all  # all/any

# 路由键配置
routing.key.generation=strategy  # strategy/hash/custom
routing.key.strategy=round-robin  # round-robin/hash/priority
routing.key.hash.algorithm=md5  # md5/sha1/sha256

# 负载均衡配置
load.balance.enabled=true
load.balance.strategy=round-robin  # round-robin/least-connections/weighted/hash
load.balance.monitor.enabled=true
load.balance.monitor.metrics=routing_count,routing_distribution,load_balance_ratio

# 路由规则配置
routing.rules.enabled=true
routing.rules.file=/etc/mq/routing-rules.json
routing.rules.reload.enabled=true
routing.rules.reload.interval=60s

# 路由监控配置
routing.monitor.enabled=true
routing.monitor.metrics=routing_count,routing_latency,routing_errors,load_balance_ratio
routing.monitor.alert.enabled=true
routing.monitor.alert.imbalance.threshold=0.2  # 20%不均衡阈值

# 路由缓存配置
routing.cache.enabled=true
routing.cache.size=10000
routing.cache.ttl=300  # 5分钟
routing.cache.eviction.policy=LRU  # LRU/LFU/FIFO
