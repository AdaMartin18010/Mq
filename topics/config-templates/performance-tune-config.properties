# 消息性能调优配置模板

# Producer性能调优配置
performance.tune.producer.enabled=true
performance.tune.producer.batch.size=32768  # 批量大小
performance.tune.producer.linger.ms=10  # 延迟发送
performance.tune.producer.compression.type=snappy  # snappy/lz4/gzip
performance.tune.producer.acks=1  # 0/1/all
performance.tune.producer.buffer.memory=67108864  # 缓冲区大小
performance.tune.producer.max.in.flight.requests.per.connection=5
performance.tune.producer.retries=3
performance.tune.producer.retry.backoff.ms=100

# Consumer性能调优配置
performance.tune.consumer.enabled=true
performance.tune.consumer.fetch.min.bytes=1024  # 最小拉取字节
performance.tune.consumer.fetch.max.wait.ms=100  # 最大等待时间
performance.tune.consumer.max.partition.fetch.bytes=1048576  # 分区拉取限制
performance.tune.consumer.max.poll.records=500  # 批量拉取
performance.tune.consumer.prefetch.count=100  # 预取数量
performance.tune.consumer.prefetch.size=0  # 预取大小

# 分区优化配置
performance.tune.partition.enabled=true
performance.tune.partition.count=10  # 分区数
performance.tune.partition.strategy=round_robin  # round_robin/hash/custom
performance.tune.partition.replication.factor=3  # 副本数

# 并发优化配置
performance.tune.concurrency.enabled=true
performance.tune.concurrency.producer.threads=5  # Producer线程数
performance.tune.concurrency.consumer.threads=10  # Consumer线程数
performance.tune.concurrency.processing.threads=20  # 处理线程数

# 网络优化配置
performance.tune.network.enabled=true
performance.tune.network.socket.send.buffer.bytes=102400  # 发送缓冲区
performance.tune.network.socket.receive.buffer.bytes=102400  # 接收缓冲区
performance.tune.network.socket.request.max.bytes=104857600  # 最大请求大小
performance.tune.network.connections.max.idle.ms=540000  # 最大空闲连接

# 序列化优化配置
performance.tune.serialization.enabled=true
performance.tune.serialization.type=avro  # json/avro/protobuf
performance.tune.serialization.schema.registry.enabled=true
performance.tune.serialization.schema.registry.url=http://localhost:8081

# 压缩优化配置
performance.tune.compression.enabled=true
performance.tune.compression.type=snappy  # snappy/lz4/gzip/none
performance.tune.compression.level=1  # 压缩级别（1-9）

# 缓存优化配置
performance.tune.cache.enabled=true
performance.tune.cache.type=lru  # lru/ttl/fifo
performance.tune.cache.max.size=10000
performance.tune.cache.expire.after.write.minutes=5

# 磁盘I/O优化配置
performance.tune.disk.enabled=true
performance.tune.disk.type=ssd  # ssd/hdd
performance.tune.disk.num.io.threads=8  # I/O线程数
performance.tune.disk.flush.interval.ms=1000  # 刷新间隔

# 内存优化配置
performance.tune.memory.enabled=true
performance.tune.memory.heap.size=4GB  # 堆大小
performance.tune.memory.off.heap.size=2GB  # 堆外内存
performance.tune.memory.gc.type=G1GC  # G1GC/ZGC

# 性能监控配置
performance.tune.monitor.enabled=true
performance.tune.monitor.metrics=throughput,latency,error_rate,resource_usage
performance.tune.monitor.alert.enabled=true
performance.tune.monitor.alert.throughput.threshold=10000  # 吞吐量阈值
performance.tune.monitor.alert.latency.threshold=1000  # 延迟阈值（ms）
