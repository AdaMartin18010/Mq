# 消息存储配置模板

# Kafka存储配置
kafka.log.dirs=/var/kafka-logs
kafka.log.retention.hours=168  # 7天
kafka.log.retention.bytes=1073741824  # 1GB
kafka.log.segment.bytes=1073741824  # 1GB per segment
kafka.log.cleanup.policy=delete  # delete/compact
kafka.log.compression.type=snappy  # snappy/gzip/lz4

# NATS存储配置
nats.core.storage=memory  # 内存存储（无持久化）
nats.jetstream.storage=file  # 文件存储（持久化）
nats.jetstream.store.dir=/var/nats-jetstream
nats.jetstream.max.age=86400  # 24小时（秒）
nats.jetstream.max.bytes=1073741824  # 1GB
nats.jetstream.max.msgs=1000000  # 100万条消息

# RabbitMQ存储配置
rabbitmq.data.dir=/var/lib/rabbitmq/mnesia
rabbitmq.queue.durable=true
rabbitmq.message.durable=true
rabbitmq.message.ttl=86400000  # 24小时（毫秒）
rabbitmq.queue.max.length=1000000  # 100万条消息
rabbitmq.queue.max.bytes=1073741824  # 1GB

# 存储保留策略
storage.retention.policy=time  # time/size/count/mixed
storage.retention.time.hours=168  # 7天
storage.retention.size.bytes=1073741824  # 1GB
storage.retention.count=1000000  # 100万条消息

# 存储清理策略
storage.cleanup.policy=auto  # auto/manual/scheduled
storage.cleanup.schedule=0 2 * * *  # 每天凌晨2点
storage.cleanup.archive.enabled=false
storage.cleanup.archive.dir=/var/archive

# 存储压缩配置
storage.compression.enabled=true
storage.compression.type=snappy  # snappy/gzip/lz4/zstd
storage.compression.level=1  # 1-9

# 存储备份配置
storage.backup.enabled=true
storage.backup.type=full  # full/incremental/snapshot
storage.backup.schedule=0 0 * * *  # 每天凌晨
storage.backup.dir=/var/backups
storage.backup.retention.days=30  # 保留30天

# 存储监控配置
storage.monitor.enabled=true
storage.monitor.metrics=storage_size,storage_usage,storage_growth,storage_cleanup_count
storage.monitor.alert.threshold.usage=0.8  # 80%使用率告警
storage.monitor.alert.threshold.growth=0.1  # 10%增长告警
