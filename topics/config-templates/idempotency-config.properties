# 消息幂等性配置模板

# Kafka幂等性配置（原生支持）
kafka.producer.idempotence.enabled=true
kafka.producer.acks=all
kafka.producer.retries=2147483647
kafka.producer.max.in.flight.requests.per.connection=5
kafka.transaction.id=my-transactional-id

# NATS幂等性配置（应用层）
nats.idempotence.enabled=true
nats.idempotence.type=msg-id  # msg-id/application
nats.idempotence.msg.id.generator=uuid
nats.idempotence.check.enabled=true

# RabbitMQ幂等性配置（应用层）
rabbitmq.idempotence.enabled=true
rabbitmq.idempotence.type=message-id  # message-id/application
rabbitmq.idempotence.message.id.generator=uuid
rabbitmq.idempotence.check.enabled=true

# 幂等性检查配置
idempotency.check.enabled=true
idempotency.check.type=memory  # memory/redis/database
idempotency.check.storage.redis.host=localhost
idempotency.check.storage.redis.port=6379
idempotency.check.storage.redis.db=0
idempotency.check.storage.redis.ttl.seconds=86400  # 24小时

# 幂等性缓存配置
idempotency.cache.enabled=true
idempotency.cache.size=100000
idempotency.cache.ttl.seconds=3600

# 幂等性监控
idempotency.monitor.enabled=true
idempotency.monitor.metrics=duplicate_count,idempotency_check_count,idempotency_check_duration

# 幂等性告警
idempotency.alert.enabled=true
idempotency.alert.duplicate.rate.threshold=0.01  # 1%
idempotency.alert.channels=email,dingtalk
