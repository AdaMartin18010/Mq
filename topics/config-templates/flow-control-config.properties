# 消息流控配置模板

# Kafka流控配置
kafka.producer.max.in.flight.requests=5
kafka.producer.buffer.memory=33554432
kafka.producer.batch.size=16384
kafka.producer.linger.ms=10
kafka.consumer.max.poll.records=500
kafka.consumer.fetch.min.bytes=1
kafka.consumer.fetch.max.wait.ms=500

# NATS流控配置
nats.sub.chan.len=1000
nats.max.reconnects=10
nats.reconnect.wait.ms=2000
nats.flow.control.enabled=true

# RabbitMQ流控配置
rabbitmq.prefetch.count=100
rabbitmq.prefetch.size=0
rabbitmq.heartbeat.seconds=600
rabbitmq.blocked.connection.timeout.seconds=300

# 流控策略
flow.control.strategy=token-bucket  # fixed-rate/token-bucket/sliding-window
flow.control.rate.per.second=1000
flow.control.burst.size=100

# 流控监控
flow.control.monitor.enabled=true
flow.control.monitor.metrics=throttled_count,throttled_duration,throughput

# 流控告警
flow.control.alert.threshold=80  # 流控触发率阈值（%）
flow.control.alert.channels=email,dingtalk
