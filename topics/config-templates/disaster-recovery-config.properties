# 消息灾难恢复配置模板

# 备份策略配置
disaster.recovery.backup.enabled=true
disaster.recovery.backup.strategy=incremental  # full/incremental/differential
disaster.recovery.backup.frequency=hourly  # realtime/hourly/daily
disaster.recovery.backup.interval.seconds=3600  # 每小时备份
disaster.recovery.backup.retention.days=30  # 保留30天
disaster.recovery.backup.storage.type=remote  # local/remote/cloud
disaster.recovery.backup.storage.path=/backup/mq
disaster.recovery.backup.storage.remote.host=backup-server
disaster.recovery.backup.storage.remote.path=/backup/mq
disaster.recovery.backup.storage.cloud.provider=aws  # aws/azure/gcp
disaster.recovery.backup.storage.cloud.bucket=mq-backup

# 恢复策略配置
disaster.recovery.recovery.enabled=true
disaster.recovery.recovery.rto.target.hours=1  # 恢复时间目标1小时
disaster.recovery.recovery.rpo.target.hours=0  # 恢复点目标0小时（零数据丢失）
disaster.recovery.recovery.strategy=automatic  # automatic/manual
disaster.recovery.recovery.automatic.enabled=true
disaster.recovery.recovery.automatic.detection.enabled=true
disaster.recovery.recovery.automatic.switch.enabled=true
disaster.recovery.recovery.manual.enabled=true
disaster.recovery.recovery.manual.procedures.file=/etc/mq/recovery-procedures.md

# 灾难检测配置
disaster.recovery.detection.enabled=true
disaster.recovery.detection.strategy=automatic  # automatic/manual
disaster.recovery.detection.health.check.interval.seconds=60
disaster.recovery.detection.failure.threshold=3  # 3次失败触发
disaster.recovery.detection.alert.enabled=true
disaster.recovery.detection.alert.channels=email,slack

# 切换流程配置
disaster.recovery.switch.enabled=true
disaster.recovery.switch.strategy=automatic  # automatic/manual
disaster.recovery.switch.primary.cluster=primary-cluster
disaster.recovery.switch.backup.cluster=backup-cluster
disaster.recovery.switch.dns.update.enabled=true
disaster.recovery.switch.dns.ttl.seconds=60
disaster.recovery.switch.load.balancer.update.enabled=true

# 数据恢复配置
disaster.recovery.data.recovery.enabled=true
disaster.recovery.data.recovery.strategy=full  # full/incremental
disaster.recovery.data.recovery.verification.enabled=true
disaster.recovery.data.recovery.verification.checksum.enabled=true
disaster.recovery.data.recovery.verification.sample.percentage=10  # 10%采样验证

# 恢复测试配置
disaster.recovery.testing.enabled=true
disaster.recovery.testing.frequency=monthly  # weekly/monthly/quarterly
disaster.recovery.testing.scenarios=data_loss,service_interruption,disaster
disaster.recovery.testing.automated.enabled=true
disaster.recovery.testing.automated.schedule=0 0 1 * *  # 每月1号
disaster.recovery.testing.report.enabled=true
disaster.recovery.testing.report.path=/var/mq/recovery-test-reports

# 跨数据中心复制配置
disaster.recovery.replication.enabled=true
disaster.recovery.replication.strategy=synchronous  # synchronous/asynchronous
disaster.recovery.replication.source.datacenter=dc1
disaster.recovery.replication.target.datacenter=dc2
disaster.recovery.replication.lag.threshold.seconds=60  # 复制延迟阈值
disaster.recovery.replication.monitor.enabled=true

# 灾难恢复监控配置
disaster.recovery.monitor.enabled=true
disaster.recovery.monitor.metrics=backup_status,recovery_time,data_loss
disaster.recovery.monitor.alert.enabled=true
disaster.recovery.monitor.alert.backup.failure.enabled=true
disaster.recovery.monitor.alert.recovery.time.exceeded.enabled=true
disaster.recovery.monitor.alert.data.loss.enabled=true
