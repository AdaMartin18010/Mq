# 消息监控告警配置模板

# 监控系统配置
monitor.enabled=true
monitor.system=prometheus  # prometheus/datadog/newrelic
monitor.prometheus.url=http://localhost:9090
monitor.grafana.url=http://localhost:3000
monitor.alertmanager.url=http://localhost:9093

# Exporter配置
exporter.kafka.enabled=true
exporter.kafka.url=http://localhost:9308
exporter.kafka.scrape.interval.seconds=15

exporter.nats.enabled=true
exporter.nats.url=http://localhost:7777
exporter.nats.scrape.interval.seconds=15

exporter.rabbitmq.enabled=true
exporter.rabbitmq.url=http://localhost:9419
exporter.rabbitmq.scrape.interval.seconds=15

# 监控指标配置
monitor.metrics.enabled=true
monitor.metrics.system.enabled=true
monitor.metrics.system.cpu.enabled=true
monitor.metrics.system.memory.enabled=true
monitor.metrics.system.disk.enabled=true
monitor.metrics.system.network.enabled=true
monitor.metrics.message.enabled=true
monitor.metrics.message.throughput.enabled=true
monitor.metrics.message.latency.enabled=true
monitor.metrics.message.error.enabled=true
monitor.metrics.message.backlog.enabled=true
monitor.metrics.business.enabled=true
monitor.metrics.business.volume.enabled=true
monitor.metrics.business.success.enabled=true
monitor.metrics.business.latency.enabled=true

# 告警规则配置
alert.rules.enabled=true
alert.rules.file=/etc/mq/alert_rules.yml
alert.rules.reload.interval.seconds=60

# 告警级别配置
alert.level.critical.enabled=true
alert.level.critical.threshold.error.rate=0.2  # 20%错误率
alert.level.critical.threshold.latency.ms=5000  # 5秒延迟
alert.level.critical.threshold.cpu.usage=0.9  # 90%CPU使用率
alert.level.warning.enabled=true
alert.level.warning.threshold.error.rate=0.1  # 10%错误率
alert.level.warning.threshold.latency.ms=1000  # 1秒延迟
alert.level.warning.threshold.cpu.usage=0.8  # 80%CPU使用率
alert.level.info.enabled=true
alert.level.info.threshold.error.rate=0.05  # 5%错误率
alert.level.info.threshold.latency.ms=500  # 500ms延迟

# 告警通知配置
alert.notification.enabled=true
alert.notification.channels=email,slack,dingtalk
alert.notification.email.enabled=true
alert.notification.email.smtp.host=smtp.example.com
alert.notification.email.smtp.port=587
alert.notification.email.from=alerts@example.com
alert.notification.email.to=ops@example.com
alert.notification.slack.enabled=true
alert.notification.slack.webhook.url=https://hooks.slack.com/services/xxx
alert.notification.dingtalk.enabled=true
alert.notification.dingtalk.webhook.url=https://oapi.dingtalk.com/robot/send?access_token=xxx

# 告警抑制配置
alert.inhibition.enabled=true
alert.inhibition.rules.file=/etc/mq/inhibition_rules.yml
alert.inhibition.group.by=alertname,instance
alert.inhibition.wait.seconds=300  # 5分钟抑制

# 告警聚合配置
alert.aggregation.enabled=true
alert.aggregation.group.by=alertname,severity
alert.aggregation.repeat.interval.seconds=3600  # 1小时重复
alert.aggregation.max.alerts=10

# 监控可视化配置
monitor.visualization.enabled=true
monitor.visualization.grafana.enabled=true
monitor.visualization.grafana.dashboards.dir=/etc/mq/grafana/dashboards
monitor.visualization.grafana.refresh.interval.seconds=30
monitor.visualization.grafana.time.range.hours=24

# 监控存储配置
monitor.storage.enabled=true
monitor.storage.retention.days=30
monitor.storage.compression.enabled=true
monitor.storage.downsampling.enabled=true
monitor.storage.downsampling.interval.hours=1
